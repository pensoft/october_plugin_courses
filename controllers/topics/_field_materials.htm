<!-- <?php if(!$this->formGetModel()->id): ?>
    <p class="flash-message static warning">Please save the topic first before viewing materials.</p>
<?php else: ?>
    <?php 
    // Get all materials from all lessons in this topic
    $materials = [];
    foreach ($this->formGetModel()->lessons as $lesson) {
        foreach ($lesson->materials as $material) {
            $materials[] = $material;
        }
    }
    ?>
    
    <?php if(empty($materials)): ?>
        <p class="flash-message static warning">No materials found. Please create lessons first, then add materials to lessons.</p>
    <?php else: ?>
        <div class="list-preview">
            <table class="table data">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Lesson</th>
                        <th>Type</th>
                        <th>Created</th>
                    </tr>
                </thead>
                <tbody>
                    <?php foreach($materials as $material): ?>
                    <tr>
                        <td><?= $material->id ?></td>
                        <td><?= $material->name ?></td>
                        <td><a href="<?= Backend::url('pensoft/courses/lessons/update/'.$material->lesson_id) ?>"><?= $material->lesson->name ?></a></td>
                        <td><?= $material->type ?></td>
                        <td><?= $material->created_at->format('Y-m-d H:i:s') ?></td>
                    </tr>
                    <?php endforeach ?>
                </tbody>
            </table>
        </div>
    <?php endif ?>
<?php endif ?>  -->